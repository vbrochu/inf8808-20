{"version":3,"sources":["src/groups.js","src/viz3.js"],"names":["colors","groups","roles","d3","margin","top","right","bottom","left","svgSize","graphSize","setSizing","data","roleGroups","roleColors","loadViz3","scaleProperty","csv","then","g","generateG","appendAxes","appendGraphLabels","positionLabels","width","height","groupOrder","getSortedGroups","preprocess","xScale","setXScale","yScale","setYScale","colorScale","setColorScale","sortedKeys","sortKeys","stackedData","stack","offset","stackOffsetSilhouette","keys","value","d","key","drawXAxis","drawYAxis","area","x","i","year","y0","y1","Tooltip","append","attr","style","mouseover","selectAll","filter","a","select","mousemove","text","mouseleave","enter","on","document","getElementById","addEventListener","toggleProperty","button","property","getAttribute","remove","setAttribute","innerHTML","graphWidth","graphHeight","setCanvasSize","emptyGroups","Object","forEach","thisYear","Date","getFullYear","yearLimit","element","roleId","parseInt","role","substr","find","row","push","count","yearSum","scaleLinear","domain","extent","range","rolesSum","groupsColors","entries","r","scaleOrdinal","call","axisBottom","tickSizeOuter","tickFormat","format","axisLeft","tickArguments","groupTotals","sort","b","map","e","order","indexa","findIndex","indexb"],"mappings":"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","file":"viz3.112b2779.js","sourceRoot":"..","sourcesContent":["/*\r\n#00876c\r\n#2c9470\r\n#45a074\r\n#5cad78\r\n#72b97c\r\n#88c580\r\n#9fd184\r\n#b6dd89\r\n#cee98f\r\n#e6f495\r\n#ffff9d\r\n#ffed8a\r\n#fedb79\r\n#fcc86b\r\n#fab560\r\n#f7a258\r\n#f38f52\r\n#ed7b4f\r\n#e7674e\r\n#de534f\r\n#d43d51\r\n*/\r\n\r\nexport const colors = {\r\n    'Acteur':'#8fda59',\r\n    'Production':'#42952e',\r\n    'Technique':'#b3b3b3',\r\n    'Esthetique':'#bfcd8e',\r\n    'Image':'#4cf32c',\r\n    'Son':'#eb46ea',\r\n    'Scénario':'#713d83',\r\n    'Organisme':'#8115b4',\r\n    'Narration':'#e9d737',\r\n    'Documentaire/émission':'#b3b3b3',\r\n    'Science':'#b3b3b3',\r\n    'Régie':'#b3b3b3',\r\n    'Réalisation':'#35618f',\r\n    'Direction artistique':'#9e7ee9',\r\n    'Direction de production':'#34debb',\r\n    'Photographe de plateau':'#da2d82',\r\n    'Générique additionnel':'#828282',\r\n    'Maison de services':'#b3b3b3',\r\n    'Conception':'#b3b3b3',\r\n    'Création':'#b3b3b3'\r\n}\r\n\r\nexport const groups = {\r\n    24: 'Acteur',\r\n    25: 'Acteur',\r\n    15: 'Acteur',\r\n\r\n    28: 'Production',\r\n    29: 'Production',\r\n    48: 'Production',\r\n\r\n    4: 'Technique',\r\n    5: 'Technique',\r\n\r\n    6: 'Esthetique',\r\n    8: 'Esthetique',\r\n    9: 'Esthetique',\r\n    17: 'Esthetique',\r\n\r\n    2: 'Image',\r\n    12: 'Image',\r\n    14: 'Image',\r\n    19: 'Image',\r\n\r\n    7: 'Son',\r\n    18: 'Son',\r\n    20: 'Son',\r\n    27: 'Son',\r\n    16: 'Son',\r\n    21: 'Son',\r\n\r\n    31: 'Scénario',\r\n    32: 'Scénario',\r\n    33: 'Scénario',\r\n\r\n    34: 'Organisme',\r\n    39: 'Organisme',\r\n    40: 'Organisme',\r\n    43: 'Organisme',\r\n    49: 'Organisme',\r\n    37: 'Organisme',\r\n\r\n    22: 'Narration',\r\n    23: 'Narration',\r\n\r\n    35: 'Documentaire/émission',\r\n    36: 'Documentaire/émission',\r\n    47: 'Documentaire/émission',\r\n\r\n    38: 'Science',\r\n    41: 'Science',\r\n\r\n    30: 'Régie',\r\n\r\n    3: 'Réalisation',\r\n    1: 'Réalisation',\r\n\r\n    10: 'Direction artistique',\r\n\r\n    11: 'Direction de production',\r\n\r\n    26: 'Photographe de plateau',\r\n\r\n    13: 'Générique additionnel',\r\n\r\n    42: 'Maison de services',\r\n\r\n    44: 'Conception',\r\n\r\n    45: 'Création'\r\n}\r\n\r\nexport const roles = {\r\n    1:\"Réalisation\",\r\n    15:\"Interprétation\",\r\n    34:\"Société de production\",\r\n    28:\"Producteur\",\r\n    14:\"Images\",\r\n    31:\"Scénario\",\r\n    37:\"Financement\",\r\n    24:\"Participant\",\r\n    19:\"Montage images\",\r\n    21:\"Musique\",\r\n    27:\"Prise de son\",\r\n    43:\"Télédiffuseur\",\r\n    13:\"Générique additionnel\",\r\n    2:\"Animation\",\r\n    29:\"Producteur délégué\",\r\n    38:\"Recherche\",\r\n    39:\"Société de distribution\",\r\n    10:\"Direction artistique\",\r\n    20:\"Montage sonore\",\r\n    23:\"Narrateur\",\r\n    35:\"Animateur d'émission\",\r\n    18:\"Mixage\",\r\n    25:\"Personnage\",\r\n    26:\"Photographe de plateau\",\r\n    16:\"Interprète musique\",\r\n    11:\"Direction de production\",\r\n    48:\"Producteur exécutif\",\r\n    8:\"Costumes\",\r\n    7:\"Conception sonore\",\r\n    32:\"Scripte\",\r\n    22:\"Narration\",\r\n    3:\"Assistant réalisation\",\r\n    17:\"Maquillage\",\r\n    9:\"Décors\",\r\n    36:\"Journaliste\",\r\n    44:\"Conception\",\r\n    47:\"Chroniqueur\",\r\n    6:\"Coiffure\",\r\n    12:\"Effets spéciaux\",\r\n    30:\"Régie\",\r\n    40:\"Société d'exportation\",\r\n    5:\"Chef machiniste\",\r\n    4:\"Chef électricien\",\r\n    45:\"Création\",\r\n    49:\"Diffuseur Web\",\r\n    42:\"Maison de services\",\r\n    41:\"Laboratoire\"\r\n}\r\n","'use strict'\r\n\r\nimport * as groups from './groups.js'\r\n\r\n/*\r\nBASE <http://data.cinematheque.qc.ca>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX frbroo: <http://iflastandards.info/ns/fr/frbr/frbroo/>\r\nPREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>\r\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n\r\nSELECT ?role ?roleLabel ?year (count(?role) as ?count) WHERE {\r\n  ?publicProjectionEvent crm:P16_used_specific_object ?publicationExpression .\r\n  ?publicationExpression crm:P165_incorporates ?recording .\r\n  ?recordingEvent frbroo:R21_created ?recording .\r\n  ?recordingEvent crm:P9_consists_of ?recordingActivity .\r\n  ?recordingEvent frbroo:R22_created_a_realization_of ?recordingWork .\r\n  ?recordingWork frbroo:R2_is_derivative_of ?work .\r\n  ?work crm:P102_has_title ?workTitle .\r\n  FILTER (contains(str(?work), \"http://data.cinematheque.qc.ca\") && contains(str(?workTitle),\"OriginalTitleWork\"))\r\n  ?recordingActivityCarriedOutBy crm:P01_has_domain ?recordingActivity .\r\n  ?recordingActivityCarriedOutBy crm:P14.1_in_the_role_of ?role .\r\n  ?role rdfs:label ?roleLabel .\r\n  \r\n  ?publicProjectionEvent crm:P4_has_time-span ?timespan .\r\n  ?timespan crm:P82a_begin_of_the_begin ?releaseBegin .\r\n  ?timespan crm:P79_beginning_is_qualified_by ?releaseBegin .\r\n  ?timespan crm:P80_end_is_qualified_by ?releaseEnd .\r\n  \r\n  BIND(year(?releaseBegin) as ?year)\r\n  BIND(year(?releaseEnd) as ?year)\r\n}\r\nGROUP BY ?role ?roleLabel ?year\r\nORDER BY ?year ?roleLabel\r\n*/\r\n\r\n(function(d3) {\r\n    let margin = {\r\n        top: 50,\r\n        right: 80,\r\n        bottom: 50,\r\n        left: 80\r\n    }\r\n\r\n    let svgSize, graphSize\r\n\r\n    setSizing()\r\n\r\n\r\n\r\n    let data = [];\r\n    let roleGroups = groups.groups;\r\n    let roleColors = groups.colors\r\n\r\n    function loadViz3(scaleProperty) {\r\n        d3.csv('./data3.csv').then((roles) => {\r\n            let g = generateG(margin)\r\n\r\n            appendAxes(g)\r\n            appendGraphLabels(g)\r\n\r\n            positionLabels(g, graphSize.width, graphSize.height)\r\n\r\n            let groupOrder = getSortedGroups(roles, roleGroups);\r\n            data = preprocess(roles, roleGroups, true);\r\n\r\n            let xScale = setXScale(graphSize.width, data);\r\n            let yScale = setYScale(graphSize.height, data, roleGroups, scaleProperty);\r\n            let colorScale = setColorScale(roleGroups, roleColors);\r\n\r\n            let sortedKeys = sortKeys(roleGroups, groupOrder);\r\n\r\n            var stackedData = d3.stack()\r\n                .offset(d3.stackOffsetSilhouette)\r\n                .keys(sortedKeys)\r\n                .value((d, key) => d[key][scaleProperty])\r\n                (data);\r\n\r\n            drawXAxis(xScale, graphSize.height)\r\n            drawYAxis(yScale)\r\n\r\n            let area = d3.area()\r\n                .x(function(d, i) {\r\n                    return xScale(d.data.year);\r\n                })\r\n                .y0(function(d) {\r\n                    return yScale(d[0]);\r\n                })\r\n                .y1(function(d) {\r\n                    return yScale(d[1]);\r\n                });\r\n\r\n            var Tooltip = g\r\n                .append(\"text\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", -5)\r\n                .style(\"opacity\", 0)\r\n                .style(\"font-size\", 30)\r\n                .style(\"margin\", \"10px\");\r\n\r\n            var mouseover = function(d) {\r\n                Tooltip.style(\"opacity\", 1)\r\n                d3.selectAll(\"#viz3 .myArea\").style(\"opacity\", .2)\r\n                    .style('stroke-width', '1px');\r\n                d3.selectAll(\"#viz3 .myArea\")\r\n                    .filter(a => roleGroups[a.key] == roleGroups[d.key])\r\n                    .style(\"stroke\", \"black\")\r\n                    .style(\"opacity\", 0.6);\r\n                d3.select(this)\r\n                    .style(\"stroke\", \"black\")\r\n                    .style(\"opacity\", 1)\r\n                    .style('stroke-width', '2px');\r\n            }\r\n            var mousemove = function(d, i) {\r\n                //console.log( d3.event )\r\n                let text = \"\";\r\n                if (roleGroups[d.key] != groups.roles[d.key]) {\r\n                    text = roleGroups[d.key] + \": \" + groups.roles[d.key];\r\n                } else {\r\n                    text = roleGroups[d.key];\r\n                }\r\n\r\n                Tooltip.text(text)\r\n            }\r\n            var mouseleave = function(d) {\r\n                Tooltip.style(\"opacity\", 0)\r\n                d3.selectAll(\"#viz3 .myArea\").style(\"opacity\", 1).style(\"stroke\", \"none\")\r\n            }\r\n\r\n            g.selectAll(\"layers\")\r\n                .data(stackedData)\r\n                .enter()\r\n                .append(\"path\")\r\n                .attr('transform', 'translate( 0, ' + -graphSize.height / 2 + ')')\r\n                .attr(\"class\", \"myArea\")\r\n                .style(\"fill\", function(d) {\r\n                    return colorScale(d.key);\r\n                })\r\n                .attr(\"d\", area)\r\n                .on(\"mouseover\", mouseover)\r\n                .on(\"mousemove\", mousemove)\r\n                .on(\"mouseleave\", mouseleave);\r\n        })\r\n    }\r\n\r\n    loadViz3(\"count\")\r\n\r\n    document.getElementById(\"viz3-button\").addEventListener(\"click\", toggleProperty);\r\n\r\n    function toggleProperty() {\r\n        let button = document.getElementById(\"viz3-button\");\r\n        let property = button.getAttribute(\"value\")\r\n\r\n        d3.select(\"#viz3\").selectAll(\"*\").remove();\r\n\r\n        if (property == \"count\") {\r\n            button.setAttribute(\"value\", \"proportion\")\r\n            loadViz3(\"proportion\");\r\n            button.innerHTML = \"Total\"\r\n        } else {\r\n            button.setAttribute(\"value\", \"count\")\r\n            loadViz3(\"count\");\r\n            button.innerHTML = \"Proportion\"\r\n        }\r\n    }\r\n\r\n    /**\r\n     *   This function handles the graph's sizing.\r\n     */\r\n    function setSizing() {\r\n        let graphWidth = 800;\r\n        let graphHeight = 500;\r\n\r\n        svgSize = {\r\n            width: graphWidth,\r\n            height: graphHeight\r\n        }\r\n\r\n        graphSize = {\r\n            width: svgSize.width - margin.right - margin.left,\r\n            height: svgSize.height - margin.bottom - margin.top\r\n        }\r\n\r\n        setCanvasSize(svgSize.width, svgSize.height)\r\n    }\r\n})(d3)\r\n\r\nfunction preprocess(roles, groups) {\r\n    let data = []\r\n    let emptyGroups = {};\r\n    Object.keys(groups).forEach(key => {\r\n        emptyGroups[key] = 0;\r\n    })\r\n\r\n    let thisYear = new Date().getFullYear();\r\n    let yearLimit = ((thisYear - 5) - (thisYear - 5) % 5) - 1;\r\n\r\n    roles.forEach(element => {\r\n        let roleId = parseInt(element.role.substr(44));\r\n        let year = element.year - element.year % 5;\r\n        if (year <= yearLimit) {\r\n            if (!data.find(d => d.year == year)) {\r\n                let row = {\r\n                    'year': year\r\n                };\r\n                Object.keys(groups).forEach(key => {\r\n                    row[key] = 0;\r\n                })\r\n                data.push(row);\r\n            }\r\n\r\n            data.find(d => d.year == year)[roleId] = parseInt(element.count);\r\n        }\r\n    });\r\n    data.forEach(d => {\r\n        let yearSum = 0;\r\n        Object.keys(groups).forEach(g => {\r\n            yearSum += d[g];\r\n        });\r\n\r\n        Object.keys(groups).forEach(g => {\r\n            d[g] = {\r\n                'count': d[g],\r\n                'proportion': d[g] / yearSum\r\n            };\r\n        });\r\n    })\r\n    return data;\r\n}\r\n\r\nfunction setXScale(width, data) {\r\n    return d3.scaleLinear()\r\n        .domain(d3.extent(data, function(d) {\r\n            return d.year;\r\n        }))\r\n        .range([0, width]);\r\n}\r\n\r\nfunction setYScale(height, data, roleGroups, scaleProperty) {\r\n    let range = 0;\r\n\r\n    data.forEach(d => {\r\n        let rolesSum = 0;\r\n        Object.keys(roleGroups).forEach(key => {\r\n            if (d[key][scaleProperty]) {\r\n                rolesSum += d[key][scaleProperty];\r\n            }\r\n        })\r\n        if (rolesSum > range) {\r\n            range = rolesSum;\r\n        }\r\n    });\r\n\r\n    return d3.scaleLinear()\r\n        .domain([0, range])\r\n        .range([height, 0]);\r\n}\r\n\r\nfunction setColorScale(roleGroups, groupsColors) {\r\n    let domain = [];\r\n    let colors = [];\r\n    Object.entries(roleGroups).forEach(r => {\r\n        domain.push(r[0]);\r\n        colors.push(groupsColors[r[1]]);\r\n    });\r\n    return d3.scaleOrdinal()\r\n        .domain(domain)\r\n        .range(colors);\r\n}\r\n\r\n/**\r\n * Draws the X axis at the bottom of the diagram.\r\n *\r\n * @param {*} xScale The scale to use to draw the axis\r\n * @param {number} height The height of the graphic\r\n */\r\nfunction drawXAxis(xScale, height) {\r\n    d3.select('#viz3 .x.axis')\r\n        .attr('transform', 'translate( 0, ' + height + ')')\r\n        .call(d3.axisBottom(xScale).tickSizeOuter(0).tickFormat(d3.format(\"d\"))) //.tickArguments([5, '~s']))\r\n}\r\n\r\n/**\r\n * Draws the Y axis to the left of the diagram.\r\n *\r\n * @param {*} yScale The scale to use to draw the axis\r\n */\r\nfunction drawYAxis(yScale) {\r\n    d3.select('#viz3 .y.axis')\r\n        .call(d3.axisLeft(yScale).tickSizeOuter(0).tickArguments([5, '.0r']))\r\n}\r\n\r\nfunction getSortedGroups(data, groups) {\r\n    let groupTotals = {};\r\n    data.forEach(d => {\r\n        let roleId = parseInt(d.role.substr(44));\r\n        if (!groupTotals[groups[roleId]]) {\r\n            groupTotals[groups[roleId]] = 0;\r\n        }\r\n        groupTotals[groups[roleId]] += parseInt(d.count);\r\n    })\r\n\r\n    return Object.entries(groupTotals).sort((a, b) => b[1] - a[1]).map(e => e[0]);\r\n}\r\n\r\nfunction sortKeys(roles, order) {\r\n    let sortedKeys = Object.entries(roles).sort((a, b) => {\r\n        let indexa = order.findIndex(r => r == a[1]);\r\n        let indexb = order.findIndex(r => r == b[1]);\r\n        if (indexa < indexb) {\r\n            return -1;\r\n        }\r\n        if (indexa > indexb) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }).map(e => e[0]);\r\n    return sortedKeys;\r\n}\r\n\r\nfunction appendAxes(g) {\r\n    g.append('g')\r\n        .attr('class', 'x axis');\r\n    g.append('g')\r\n        .attr('class', 'y axis');\r\n}\r\n\r\nfunction appendGraphLabels(g) {\r\n    g.append('text')\r\n        .text('Année')\r\n        .attr('class', 'x axis-text')\r\n        .attr('font-size', 20)\r\n}\r\n\r\nfunction positionLabels(g, width, height) {\r\n    // TODO : Position axis labels\r\n    d3.select('#viz3 .y.axis-text')\r\n        .attr('x', -48)\r\n        .attr('y', height / 2)\r\n\r\n    d3.select('#viz3 .x.axis-text')\r\n        .attr('x', width / 2)\r\n        .attr('y', height + 40)\r\n}\r\n\r\nfunction generateG(margin) {\r\n    return d3.select('.graph-viz3')\r\n        .select('svg')\r\n        .append('g')\r\n        .attr('id', 'graph-g')\r\n        .attr('transform',\r\n            'translate(' + margin.left + ',' + margin.top + ')')\r\n}\r\n\r\nfunction setCanvasSize(width, height) {\r\n    d3.select('#viz3')\r\n        .attr('width', width)\r\n        .attr('height', height)\r\n}"]}